<!--
  BottomToolbar.xaml
  UserControl for the application's bottom toolbar.
  Contains color scale controls, timeline slider, playback, and time offset input.
-->

<UserControl x:Class="fcb_thermo_app.Views.BottomToolbar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="50"
             Background="{StaticResource GreyBrush}">
  <Grid Margin="12,0">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="*"/>
      <!-- Left-aligned controls: Color scale min/max, gradient, auto toggle -->
      <ColumnDefinition Width="Auto"/>
      <!-- Right-aligned controls: Playback, time offset, timeline slider, end time -->
    </Grid.ColumnDefinitions>

    <StackPanel Orientation="Horizontal"
                HorizontalAlignment="Left"
                Grid.Column="0">
      <!-- Min Color Scale Input -->
      <TextBlock Text="Min: "
                 VerticalAlignment="Center"
                 Margin="10,0,0,0"
                 Foreground="{StaticResource WhiteBrush}"/>
      <TextBox x:Name="MinColorScaleInput"
               Text="Min: 240 °C"
               Style="{StaticResource RoundedInputStyle}"
               Foreground="{StaticResource WhiteBrush}"
               VerticalAlignment="Center"
               FontSize="12"
               Width="60"
               LostFocus="MinColorScaleInput_LostFocus"
               KeyDown="MinColorScaleInput_KeyDown">
        <TextBox.ToolTip>
          <ToolTip Style="{StaticResource RoundedTooltipStyle}">
            Set the minimum value for the color scale.
          </ToolTip>
        </TextBox.ToolTip>
      </TextBox>
      <TextBlock Text=" °C"
                 VerticalAlignment="Center"
                 Margin="4,0,10,0"
                 Foreground="{StaticResource WhiteBrush}"/>
      <!-- Color Scale Gradient -->
      <Rectangle Width="400"
                 Height="26"
                 RadiusX="3"
                 RadiusY="3">
        <Rectangle.Fill>
          <LinearGradientBrush StartPoint="0,0"
                               EndPoint="1,0">
            <GradientStop Color="#0000FF"
                          Offset="0"/>
            <GradientStop Color="#00FFFF"
                          Offset="0.25"/>
            <GradientStop Color="#00FF00"
                          Offset="0.5"/>
            <GradientStop Color="#FFFF00"
                          Offset="0.75"/>
            <GradientStop Color="#FF0000"
                          Offset="1"/>
          </LinearGradientBrush>
        </Rectangle.Fill>
      </Rectangle>
      <!-- Max Color Scale Input -->
      <TextBlock Text="Max: "
                 VerticalAlignment="Center"
                 Margin="10,0,4,0"
                 Foreground="{StaticResource WhiteBrush}"/>
      <TextBox x:Name="MaxColorScaleInput"
               Text="Max: 270 °C"
               Style="{StaticResource RoundedInputStyle}"
               Foreground="{StaticResource WhiteBrush}"
               VerticalAlignment="Center"
               FontSize="12"
               Width="60"
               LostFocus="MaxColorScaleInput_LostFocus"
               KeyDown="MaxColorScaleInput_KeyDown">
        <TextBox.ToolTip>
          <ToolTip Style="{StaticResource RoundedTooltipStyle}">
            Set the maximum value for the color scale.
          </ToolTip>
        </TextBox.ToolTip>
      </TextBox>
      <TextBlock Text=" °C"
                 VerticalAlignment="Center"
                 Margin="0,0,10,0"
                 Foreground="{StaticResource WhiteBrush}"/>
      <!-- Auto Color Scale Toggle -->
      <ToggleButton x:Name="AutoColorScaleToggle"
                    IsChecked="True"
                    Checked="AutoColorScaleToggle_Checked"
                    Unchecked="AutoColorScaleToggle_Unchecked"
                    Margin="8,0,0,0"
                    Style="{StaticResource RoundedToggleSwitchStyle}"
                    VerticalAlignment="Center">
        <ToggleButton.ToolTip>
          <ToolTip Style="{StaticResource RoundedTooltipStyle}">
            Toggle automatic scaling of the color range.
          </ToolTip>
        </ToggleButton.ToolTip>
      </ToggleButton>
    </StackPanel>

    <StackPanel Orientation="Horizontal"
                VerticalAlignment="Center"
                HorizontalAlignment="Right"
                Grid.Column="1">
      <!-- Play Button -->
      <Button x:Name="PlayButton"
              Background="{StaticResource GreyBrush}"
              Foreground="{StaticResource WhiteBrush}"
              Content="▶"
              Width="32"
              Height="32"
              Margin="0,0,8,0"
              Click="PlayButton_Click">
        <Button.ToolTip>
          <ToolTip Style="{StaticResource RoundedTooltipStyle}">
            Play or pause the timeline animation.
          </ToolTip>
        </Button.ToolTip>
      </Button>
      <!-- Time Offset Input -->
      <TextBox x:Name="OffsetInput"
               VerticalAlignment="Center"
               Style="{StaticResource RoundedInputStyle}"
               Text="00:00"
               LostFocus="OffsetInput_LostFocus"
               KeyDown="OffsetInput_KeyDown"
               Margin="10,0,10,0">
        <TextBox.ToolTip>
          <ToolTip Style="{StaticResource RoundedTooltipStyle}">
            Set the time offset for the timeline.
          </ToolTip>
        </TextBox.ToolTip>
      </TextBox>
      <!-- Timeline Slider -->
      <Slider x:Name="TimelineSlider"
              Width="300"
              VerticalAlignment="Center"
              Minimum="0"
              Maximum="100"
              Value="0"
              ValueChanged="TimelineSlider_ValueChanged">
        <Slider.ToolTip>
          <ToolTip Style="{StaticResource RoundedTooltipStyle}">
            Drag to move through the timeline.
          </ToolTip>
        </Slider.ToolTip>
      </Slider>
      <Border CornerRadius="6"
              BorderBrush="{StaticResource WhiteBrush}"
              BorderThickness="1"
              Margin="10">
        <TextBlock x:Name="EndTimeText"
                   Text="00:00"
                   Foreground="{StaticResource WhiteBrush}"
                   VerticalAlignment="Center"
                   Margin="10,0,10,0"
                   Padding="2"/>
      </Border>
    </StackPanel>
  </Grid>
</UserControl>
